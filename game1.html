<script>
    document.addEventListener('DOMContentLoaded', () => {
        // ... (keep all existing code until the generateNumber function)

        // Array to track active balls
        const activeBalls = [];
        const maxBalls = 5; // Maximum balls on screen at once

        // Generate a new number (ball)
        function generateNumber() {
            if (!gameActive || activeBalls.length >= maxBalls) return;
            
            const number = document.createElement('div');
            number.className = 'number neutral';
            
            // Random value between 1 and 100
            const value = Math.floor(Math.random() * 100) + 1;
            number.textContent = value;
            
            // Random vertical position (avoiding edges)
            const minTop = 30;
            const maxTop = gameArea.offsetHeight - 80;
            const topPos = minTop + Math.random() * (maxTop - minTop);
            number.style.top = `${topPos}px`;
            
            number.dataset.value = value;
            number.addEventListener('click', handleNumberClick);
            
            gameArea.appendChild(number);
            activeBalls.push(number); // Track this ball
            
            animateNumber(number);
        }

        // Animate number from right to left
        function animateNumber(element) {
            let position = gameArea.offsetWidth;
            
            function move() {
                if (!gameActive) {
                    // Remove from active balls if game paused
                    const index = activeBalls.indexOf(element);
                    if (index > -1) activeBalls.splice(index, 1);
                    return;
                }
                
                position -= scrollSpeed;
                element.style.right = `${position}px`;
                
                // Remove when out of view
                if (position < -60) {
                    element.remove();
                    const index = activeBalls.indexOf(element);
                    if (index > -1) activeBalls.splice(index, 1);
                    return;
                }
                
                animationFrame = requestAnimationFrame(move);
            }
            
            move();
        }

        // In handleNumberClick, update to remove from activeBalls when clicked
        function handleNumberClick(e) {
            if (!gameActive) return;
            
            const number = e.target;
            const value = parseInt(number.dataset.value);
            const index = activeBalls.indexOf(number);
            if (index > -1) activeBalls.splice(index, 1);
            
            // ... (rest of the existing handleNumberClick code)
        }

        // ... (keep all remaining existing code)
    });
</script>
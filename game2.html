<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Prime Number Hunter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- UI styles unchanged from your original --- */
        * {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
        body {display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#1a2a6c,#b21f1f,#1a2a6c);overflow:hidden;padding:10px;}
        .game-container {position:relative;width:100%;max-width:900px;height:600px;background-color:rgba(0,0,0,0.7);border-radius:20px;box-shadow:0 0 30px rgba(0,0,0,0.5);overflow:hidden;display:flex;flex-direction:column;}
        header {background:linear-gradient(to right,#3498db,#2c3e50);color:white;padding:10px 15px;text-align:center;z-index:10;box-shadow:0 4px 10px rgba(0,0,0,0.3);display:flex;justify-content:space-between;align-items:center;}
        .header-content {flex:1;display:flex;flex-direction:column;align-items:center;}
        h1 {font-size:1.8rem;text-shadow:2px 2px 4px rgba(0,0,0,0.5);letter-spacing:1px;margin-bottom:5px;line-height:1.2;}
        .stats {display:flex;justify-content:center;gap:20px;font-size:1.2rem;font-weight:bold;margin-top:5px;}
        .icon-controls {display:flex;gap:10px;}
        .icon-btn {width:40px;height:40px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:1.2rem;cursor:pointer;background:rgba(255,255,255,0.2);color:white;border:none;transition:all 0.3s;}
        .icon-btn:hover {background:rgba(255,255,255,0.3);transform:scale(1.1);}
        .game-board {flex:1;position:relative;overflow:hidden;background:radial-gradient(circle,rgba(25,25,50,0.8) 0%,rgba(10,10,30,0.9) 100%);}
        .ball {position:absolute;border-radius:50%;display:flex;justify-content:center;align-items:center;font-weight:bold;cursor:pointer;box-shadow:0 0 15px rgba(255,255,255,0.3);transition:transform 0.2s,box-shadow 0.2s;user-select:none;}
        .ball:hover {transform:scale(1.05);box-shadow:0 0 20px rgba(255,255,255,1);}
        .prime {background:radial-gradient(circle,#3498db,#2980b9);color:#fff;font-size:1.8rem;text-shadow:1px 1px 2px rgba(0,0,0,0.8);}
        .non-prime {background:radial-gradient(circle,#3498db,#2980b9);color:#fff;font-size:1.5rem;}
        .instructions {color:#ddd;text-align:center;padding:10px;font-size:1rem;background:rgba(0,0,0,0.4);}
        .game-over {position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:100;color:white;display:none;}
        .game-over h2 {font-size:2.5rem;margin-bottom:15px;color:#ff9a00;text-shadow:0 0 10px rgba(255,154,0,0.7);text-align:center;padding:0 10px;}
        .final-score {font-size:4rem;font-weight:bold;color:#2ecc71;text-shadow:0 0 15px rgba(46,204,113,0.7);margin:20px 0;}
        .particle {position:absolute;width:10px;height:10px;border-radius:50%;background-color:#ff9a00;pointer-events:none;opacity:0.7;}
        .highlight {animation:highlight 0.5s ease-out;}
        .correct {background:radial-gradient(circle,#2ecc71,#27ae60) !important;transform:scale(1.2);}
        .incorrect {background:radial-gradient(circle,#e74c3c,#c0392b) !important;animation:shake 0.5s linear;}
        @keyframes highlight {0%{transform:scale(1);}50%{transform:scale(1.3);}100%{transform:scale(1);}}
        @keyframes shake {0%,100%{transform:translateX(0);}25%{transform:translateX(-10px);}75%{transform:translateX(10px);}}
        .prime-facts {max-width:90%;text-align:center;margin:15px 0;font-size:1rem;line-height:1.5;color:#ddd;padding:0 15px;}
        @media (max-width:768px){.game-container{height:500px;}h1{font-size:1.5rem;}.stats{font-size:1rem;gap:15px;}.icon-btn{width:35px;height:35px;font-size:1rem;}.game-over h2{font-size:2rem;}.final-score{font-size:3rem;}}
        @media (max-width:480px){.game-container{height:450px;}h1{font-size:1.3rem;}.stats{gap:10px;font-size:0.9rem;}.instructions{font-size:0.9rem;padding:8px;}.icon-btn{width:30px;height:30px;font-size:0.9rem;}.game-over h2{font-size:1.8rem;}.final-score{font-size:2.5rem;}.prime-facts{font-size:0.9rem;}}
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="icon-controls">
                <button class="icon-btn" id="resetBtn" title="Reset Game"><i class="fas fa-redo"></i></button>
            </div>
            <div class="header-content">
                <h1>Prime Number Hunter</h1>
                <div class="stats">
                    <div class="timer">Time: <span id="time">30</span>s</div>
                    <div class="score">Score: <span id="score">0</span></div>
                </div>
            </div>
        </header>
        <div class="instructions">Click on PRIME numbers (divisible only by 1 and themselves)</div>
        <div class="game-board" id="gameBoard"></div>
        <div class="game-over" id="gameOver">
            <h2>Time's Up!</h2>
            <div>Your Final Score:</div>
            <div class="final-score" id="finalScore">0</div>
            <button class="icon-btn" id="playAgainBtn" style="width:50px;height:50px;font-size:1.5rem;"><i class="fas fa-redo"></i></button>
            <div class="prime-facts"><p>Prime numbers are the building blocks of all whole numbers. The largest known prime has over 24 million digits!</p></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('gameBoard');
            const resetBtn = document.getElementById('resetBtn');
            const playAgainBtn = document.getElementById('playAgainBtn');
            const gameOverScreen = document.getElementById('gameOver');
            const timeDisplay = document.getElementById('time');
            const scoreDisplay = document.getElementById('score');
            const finalScoreDisplay = document.getElementById('finalScore');

            let gameActive = false;
            let timeLeft = 30;
            let score = 0;
            let gameTimer;
            let balls = [];
            const ballCount = 8;

            // Generate pools (2â€“200)
            const primesPool = getPrimes(2, 100);
            const nonPrimesPool = getNonPrimes(1, 100);

            let primeDeck = shuffle([...primesPool]);
            let nonPrimeDeck = shuffle([...nonPrimesPool]);

            function getPrimes(min, max) {
                const primes = [];
                for (let num = min; num <= max; num++) {
                    if (isPrime(num)) primes.push(num);
                }
                return primes;
            }
            function getNonPrimes(min, max) {
                const nonPrimes = [];
                for (let num = min; num <= max; num++) {
                    if (!isPrime(num)) nonPrimes.push(num);
                }
                return nonPrimes;
            }
            function isPrime(num) {
                if (num < 2) return false;
                for (let i = 2; i * i <= num; i++) {
                    if (num % i === 0) return false;
                }
                return true;
            }
            function shuffle(arr) {
                return arr.sort(() => Math.random() - 0.5);
            }
            function drawPrime() {
                if (primeDeck.length === 0) primeDeck = shuffle([...primesPool]);
                return primeDeck.pop();
            }
            function drawNonPrime() {
                if (nonPrimeDeck.length === 0) nonPrimeDeck = shuffle([...nonPrimesPool]);
                return nonPrimeDeck.pop();
            }

            function createBall(number) {
                const ball = document.createElement('div');
                ball.classList.add('ball');

                const baseSize = Math.min(window.innerWidth, window.innerHeight) / 10;
                const size = Math.floor(Math.random() * (baseSize * 0.7)) + (baseSize * 0.8);
                ball.style.width = `${size}px`;
                ball.style.height = `${size}px`;

                // random positioning
                const maxX = gameBoard.clientWidth - size;
                const maxY = gameBoard.clientHeight - size;
                ball.style.left = `${Math.floor(Math.random() * maxX)}px`;
                ball.style.top = `${Math.floor(Math.random() * maxY)}px`;

                ball.textContent = number;
                if (isPrime(number)) ball.classList.add('prime');
                else ball.classList.add('non-prime');

                ball.addEventListener('click', () => {
                    if (!gameActive) return;
                    ball.style.pointerEvents = 'none';
                    if (isPrime(number)) {
                        score++;
                        scoreDisplay.textContent = score;
                        ball.classList.add('correct');
                        createParticles(ball);
                        setTimeout(() => {
                            gameBoard.removeChild(ball);
                            balls = balls.filter(b => b !== ball);
                            spawnNewBall();
                        }, 500);
                    } else {
                        ball.classList.add('incorrect');
                        setTimeout(() => {
                            ball.classList.remove('incorrect');
                            ball.style.pointerEvents = 'auto';
                        }, 1000);
                    }
                });

                return ball;
            }

            function spawnNewBall() {
                const hasPrime = balls.some(b => b.classList.contains('prime'));
                let num;
                if (!hasPrime) {
                    num = drawPrime();
                } else {
                    num = Math.random() < 0.4 ? drawPrime() : drawNonPrime();
                }
                const newBall = createBall(num);
                balls.push(newBall);
                gameBoard.appendChild(newBall);
            }

            function createParticles(element) {
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                for (let i = 0; i < 15; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 50 + 30;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    const size = Math.random() * 10 + 5;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    const colors = ['#ff9a00', '#ff6600', '#ffcc00', '#ff3300'];
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    document.body.appendChild(particle);
                    particle.animate([
                        { transform: `translate(0,0)`, opacity: 1 },
                        { transform: `translate(${Math.cos(angle) * 100}px, ${Math.sin(angle) * 100}px)`, opacity: 0 }
                    ], { duration: 700, easing: 'ease-out' });
                    setTimeout(() => { particle.remove(); }, 700);
                }
            }

            function moveBalls() {
                if (!gameActive) return;
                balls.forEach(ball => {
                    const rect = ball.getBoundingClientRect();
                    const boardRect = gameBoard.getBoundingClientRect();
                    let dx = parseFloat(ball.dataset.dx || (Math.random() * 2 - 1));
                    let dy = parseFloat(ball.dataset.dy || (Math.random() * 2 - 1));
                    dx *= 0.7; dy *= 0.7;
                    if (Math.abs(dx) < 0.3) dx = Math.sign(dx) * 0.3;
                    if (Math.abs(dy) < 0.3) dy = Math.sign(dy) * 0.3;
                    let newX = rect.left - boardRect.left + dx;
                    let newY = rect.top - boardRect.top + dy;
                    if (newX <= 0 || newX + rect.width >= boardRect.width) dx = -dx * 0.8;
                    if (newY <= 0 || newY + rect.height >= boardRect.height) dy = -dy * 0.8;
                    ball.style.left = `${Math.max(0, Math.min(newX, boardRect.width - rect.width))}px`;
                    ball.style.top = `${Math.max(0, Math.min(newY, boardRect.height - rect.height))}px`;
                    ball.dataset.dx = dx;
                    ball.dataset.dy = dy;
                });
                requestAnimationFrame(moveBalls);
            }

            function startGame() {
                gameActive = true;
                timeLeft = 30;
                score = 0;
                timeDisplay.textContent = timeLeft;
                scoreDisplay.textContent = score;
                gameOverScreen.style.display = 'none';
                gameBoard.innerHTML = '';
                balls = [];
                for (let i = 0; i < ballCount; i++) {
                    spawnNewBall();
                }
                gameTimer = setInterval(() => {
                    timeLeft--;
                    timeDisplay.textContent = timeLeft;
                    if (timeLeft <= 0) endGame();
                }, 1000);
                moveBalls();
            }

            function endGame() {
                gameActive = false;
                clearInterval(gameTimer);
                finalScoreDisplay.textContent = score;
                gameOverScreen.style.display = 'flex';
            }

            function resetGame() {
                clearInterval(gameTimer);
                gameActive = false;
                gameBoard.innerHTML = '';
                balls = [];
                timeDisplay.textContent = '30';
                scoreDisplay.textContent = '0';
                gameOverScreen.style.display = 'none';
            }

            resetBtn.addEventListener('click', resetGame);
            playAgainBtn.addEventListener('click', startGame);

            resetGame();
            startGame();
        });
    </script>
</body>
</html>
